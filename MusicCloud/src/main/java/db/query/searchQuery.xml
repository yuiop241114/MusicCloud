<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>

	<entry key="searchAccuracyList">
		SELECT 
		       ML.MUSIC_NO MUSIC_NO
		     , ML.MUSIC_TITLE MUSIC_TITLE
		     , ML.MUSIC_SINGER MUSIC_SINGER
		     , MF.MUSIC_FILE_STORE_PATH || MF.MUSIC_FILE_EDIT_NAME AS "MUSIC_PATH"
		     , MF.MUSIC_IMAGE_PATH || MF.MUSIC_IMAGE_EDIT_NAME AS "IMAGE_PATH"
		FROM MUSIC_LIST ML
		JOIN MUSIC_FILE MF ON (ML.MUSIC_NO = MF.MUSIC_NO)
		WHERE LOWER(MUSIC_TITLE) LIKE LOWER(?)
			 OR LOWER(MUSIC_SINGER) LIKE LOWER(?)
		AND ML.MUSIC_STATUS = 'Y'	
	</entry>
	
	<entry key="searchPopularList">
		SELECT 
		       ML.MUSIC_NO
		     , ML.MUSIC_TITLE MUSIC_TITLE
		     , ML.MUSIC_SINGER MUSIC_SINGER
		     , MF.MUSIC_IMAGE_PATH || MF.MUSIC_IMAGE_EDIT_NAME IMAGE_PATH 
		     , (ML.MUSIC_COUNT + (ML.MUSIC_LIKE - ML.MUSIC_DISLIKE) ) POPULAR
		 FROM MUSIC_LIST ML
		 JOIN MUSIC_FILE MF ON (ML.MUSIC_NO = MF.MUSIC_NO)
		WHERE LOWER(MUSIC_TITLE) LIKE LOWER(?)
			 OR LOWER(MUSIC_SINGER) LIKE LOWER(?)
		ORDER 
		   BY MUSIC_COUNT DESC
	</entry>
	
	<entry key="searchPopularLocationList">
		SELECT 
		       DISTINCT MUSIC_NO
		     , MUSIC_TITLE
		     , MUSIC_SINGER
		     , MUSIC_IMAGE_PATH || MUSIC_IMAGE_EDIT_NAME IMAGE_PATH
		     , (MUSIC_COUNT + (MUSIC_LIKE - MUSIC_DISLIKE) ) POPULAR
		     , LOCATION_NAME
		  FROM RECENT_MUSIC 
		  JOIN LOCATION USING(LOCATION_NO)
		  JOIN MUSIC_FILE USING (MUSIC_NO)
		  JOIN MUSIC_LIST USING(MUSIC_NO)
		 WHERE LOCATION_NO = ?
		   AND (LOWER(MUSIC_TITLE) LIKE LOWER(?) OR LOWER(MUSIC_SINGER) LIKE LOWER(?))
		 ORDER BY POPULAR DESC
	</entry>
	
	<entry key="musicSelect">
		SELECT 
		       ML.MUSIC_NO MUSIC_NO
		     , MF.MUSIC_FILE_STORE_PATH || MF.MUSIC_FILE_EDIT_NAME AS "MUSIC_PATH"
		     , MF.MUSIC_IMAGE_PATH || MF.MUSIC_IMAGE_EDIT_NAME AS "IMAGE_PATH"
		     , ML.MUSIC_TITLE MUSIC_TITLE
		     , ML.MUSIC_SINGER MUSIC_SINGER
		     , ML.MUSIC_COUNT MUSIC_COUNT
		     , ML.MUSIC_LIKE MUSIC_LIKE
		     , ML.MUSIC_DISLIKE MUSIC_DISLIKE
		     , ML.LYRICS LYRICS
		FROM MUSIC_LIST ML
		JOIN MUSIC_FILE MF ON (ML.MUSIC_NO = MF.MUSIC_NO)
		WHERE ML.MUSIC_STATUS = 'Y'
		  AND ML.MUSIC_NO = ?
	</entry>
	
	<entry key="increaseCount">
		UPDATE MUSIC_LIST
		   SET MUSIC_COUNT = MUSIC_COUNT + 1
		 WHERE MUSIC_NO = ?
	</entry>
	
	<entry key="updateRecentMusic">
		UPDATE RECENT_MUSIC
		   SET MUSIC_NO = ?
		 WHERE MEMBER_NO = ?
	</entry>
</properties>